{% extends 'shared/_layout.html' %}
{% load poll_extras %}
{% load thumbnail %}

{% block title %}
    user order
{% endblock %}

{% block content %}
    <div class="container-fluid w-100 mt-5 d-flex justify-content-center align-items-center">
        <div class="container-fluid container-xxl d-flex justify-content-evenly align-items-start w-100 h-100 flex-wrap">
            <div class="row h-100 p-0 m-0 col-10 col-lg-8 mb-5">
                <ul class="cartTitle d-flex justify-content-center align-items-center p-0 m-0 w-100 px-4">
                    <li class="col-2 d-flex justify-content-start align-items-center h-100">image</li>
                    <li class="col-3 d-flex justify-content-start align-items-center h-100">description</li>
                    <li class="col-2 d-flex justify-content-start align-items-center h-100">price</li>
                    <li class="col-2 d-flex justify-content-start align-items-center h-100">quantity</li>
                    <li class="col-2 d-flex justify-content-start align-items-center h-100">total price</li>
                    <li class="col-1 d-flex justify-content-start align-items-center h-100">delete</li>
                </ul>

                {% for order_detail in order.orderdetail_set.all %}
                    <ul class="p-0 m-0 w-100 cartProduct px-lg-4">
                        <li class="d-flex justify-content-start align-items-center col-2 cartImage">
                            {% thumbnail order_detail.product.image "100x100" crop='center' as im %}
                                <img src="{{ im.url }}" alt="">
                            {% endthumbnail %}
                        </li>
                        <li class="d-flex justify-content-start align-items-center col-3 h-100 cartDesc flex-wrap ps-2 ps-md-4">
                            <div class="col-12">
                                <h4 class="col-12">{{ order_detail.product.title }}</h4>
                                <h6 class="col-12">id : {{ order_detail.product.id }}</h6>
                            </div>

                        </li>
                        <li class="d-flex justify-content-start align-items-center col-1 h-100 cartPrice">{{ order_detail.product.price|three_digits_price }}</li>
                        <li class="d-flex justify-content-start align-items-center col-2 h-100 cartQuantity">
                            <div class="quantity d-flex justify-content-center align-items-center">
                                <div class="p-2 d-flex justify-content-center align-items-center decrease">
                                    <i class="bi bi-trash"></i>
                                </div>
                                <h4 class="p-2 my-2 d-flex justify-content-center align-items-center">1</h4>
                                <div class="p-2 d-flex justify-content-center align-items-center increase">+</div>
                            </div>

                        </li>
                        <li class="d-flex justify-content-center align-items-center col-2 h-100 cartTotal">{% multiply order_detail.count order_detail.product.price %}</li>
                        <li class="d-flex justify-content-center align-items-center col-1 h-100 cartDelete"><i
                                class="bi bi-x-circle"></i></li>
                    </ul>
                    <div class="returnProduct col-12">
                        <div class="col-12 d-flex justify-content-start align-items-center pt-3 flex-wrap">
                            <h6 class="col-12 col-lg-8">Do you want to delete this product with {{ order_detail.product.id }} id</h6>
                            <span class="returnP mx-4">No</span>
                            <span class="deleteP mx-4">Yes</span>
                        </div>

                    </div>
                {% endfor %}


            </div>
            <div class="row h-100 p-0 m-0 col-10 col-lg-8 py-2">
                <div class="col-12 px-4 pt-1">
                    <p class="col-12 showDiscountCode d-flex pt-1" data-status="off">
                        کد تخفیف
                        &nbsp; &nbsp;
                        <span class="showDiscountCodeChild d-flex justify-content-center align-items-center">&gt;</span>
                    </p>
                    <div class="col-12 discountCode">
                        <input class="d-block mb-2" type="text">
                        <button class="d-block mb-2 sendDiscountCode">اعمال و بررسی</button>
                    </div>
                </div>
                <div class="col-12 px-4 d-flex justify-content-center align-items-center flex-wrap detailsOfCartPrice my-1">
                    <p class="col-6 d-flex justify-content-start align-items-center pt-2">جمع سبد خرید</p>
                    <p class="col-6 d-flex justify-content-end align-items-center pt-2">{{ total_amount|three_digits_price }}</p>
                </div>

                <div class="col-12 d-flex flex-wrap justify-content-between my-3">
                    <button class="cartButton">update cart</button>
                    <button class="cartButton">پرداخت</button>
                </div>
            </div>
        </div>
    </div>
    <script src="/statics/js/cart.js"></script>
{% endblock %}